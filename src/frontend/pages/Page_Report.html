<div id="page-report" class="page-section hidden h-full w-full p-4 flex flex-col gap-4 bg-base-200 overflow-hidden">
    <div
        class="flex justify-between items-center bg-white px-5 py-3 rounded-2xl shadow-sm border border-base-300 shrink-0">
        <div class="flex items-center gap-3">
            <div class="bg-primary/10 p-2 rounded-xl text-primary"><i class="fas fa-file-invoice text-xl"></i></div>
            <div>
                <h2 class="text-base font-bold text-gray-800">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏Å‡∏∞ (Daily Report)</h2>
                <p class="text-[10px] text-gray-400">‡∏™‡∏£‡∏∏‡∏õ‡∏á‡∏≤‡∏ô Ticket ‡πÅ‡∏•‡∏∞ ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô</p>
            </div>
        </div>
        <div class="flex items-center gap-2">
            <div class="relative cursor-pointer" onclick="ReportManager.openDatePicker()">
                <i class="fas fa-calendar-alt absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"></i>
                <input type="text" id="inputDate"
                    class="input input-sm input-bordered pl-9 w-40 font-bold text-center cursor-pointer rounded-lg text-xs"
                    readonly>
            </div>
            <button id="btn-load-data" onclick="ReportManager.autoFetchAll()"
                class="btn btn-sm btn-neutral text-white shadow-sm btn-loading-overlay min-w-[90px]">
                <span class="default-content flex items-center gap-2">
                    <i class="fas fa-sync-alt text-xs"></i>
                    <span class="hidden sm:inline text-xs">‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span>
                </span>
                <span class="loading-content">
                    <span class="custom-loader"></span>
                </span>
            </button>
        </div>
    </div>

    <div class="flex-1 overflow-hidden min-h-0 grid grid-cols-1 lg:grid-cols-12 gap-4">

        <div class="lg:col-span-8 flex flex-col gap-4 overflow-hidden h-full">

            <div
                class="card bg-white shadow-sm border border-base-300 flex-[2] flex flex-col overflow-hidden rounded-2xl min-h-0">
                <div class="px-5 py-3 border-b border-base-100 bg-white flex flex-col gap-2 shrink-0">
                    <div class="flex justify-between items-center">
                        <h3 class="font-bold text-sm text-gray-700 flex items-center gap-2">
                            <i class="fas fa-clipboard-list text-indigo-500"></i> ‡∏™‡∏£‡∏∏‡∏õ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏°‡∏ï‡∏ã‡πå‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô
                            <button onclick="ReportManager.showMatchInfo()"
                                class="btn btn-xs btn-circle btn-ghost text-indigo-400 hover:text-indigo-600 hover:bg-indigo-50"
                                title="‡∏î‡∏π‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö">
                                <i class="fas fa-info-circle"></i>
                            </button>
                        </h3>
                        <span class="badge badge-neutral badge-sm whitespace-nowrap" id="disp-match-total">0 ‡∏Ñ‡∏π‡πà</span>
                    </div>
                    <div id="date-range-label" class="text-[10px] text-gray-400 font-mono"></div>
                    <div id="league-breakdown" class="flex flex-wrap gap-1.5 justify-start text-[10px] min-h-[24px]">
                    </div>
                </div>

                <div class="overflow-y-auto flex-1 p-0 bg-gray-50/30 custom-scrollbar">
                    <table class="table table-xs w-full table-pin-rows">
                        <thead class="bg-gray-50 text-gray-500 font-medium">
                            <tr>
                                <th class="w-16 text-center">‡πÄ‡∏ß‡∏•‡∏≤</th>
                                <th>‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô (Match End)</th>
                                <th class="w-16 text-center">Start</th>
                                <th class="w-16 text-center">Stop</th>
                                <th class="w-24 text-center">NOC OPEN</th>
                            </tr>
                        </thead>
                        <tbody id="verification-tbody" class="bg-white"></tbody>
                    </table>
                    <div id="verify-loader" class="hidden py-10 text-center"><span
                            class="loading loading-spinner text-primary"></span></div>
                    <div id="verify-empty" class="hidden py-10 text-center text-gray-300 text-xs">
                        ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏µ‡πâ</div>
                </div>
            </div>

            <div
                class="card bg-white shadow-sm border border-base-300 flex-[1] flex flex-col overflow-hidden rounded-2xl min-h-0">
                <div
                    class="px-5 py-3 border-b border-base-100 bg-white flex flex-col md:flex-row justify-between items-start md:items-center shrink-0 gap-2">
                    <h3 class="font-bold text-sm text-gray-700 flex items-center gap-2">
                        <i class="fas fa-ticket-alt text-error"></i> ‡∏™‡∏£‡∏∏‡∏õ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏¥‡∏Ñ‡πÄ‡∏Å‡πá‡∏ï
                        <button onclick="ReportManager.showTicketInfo()"
                            class="btn btn-xs btn-circle btn-ghost text-amber-400 hover:text-amber-600 hover:bg-amber-50"
                            title="‡∏î‡∏π‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö">
                            <i class="fas fa-info-circle"></i>
                        </button>
                    </h3>
                    <div class="flex flex-wrap gap-2 text-[10px] font-bold items-center">
                        <span class="text-green-600 bg-green-50 px-2 py-0.5 rounded border border-green-200">üü¢
                            ‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà:
                            <span id="disp-ticket-new">0</span></span>
                        <span class="text-blue-600 bg-blue-50 px-2 py-0.5 rounded border border-blue-200">üîµ ‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ:
                            <span id="disp-ticket-resolved">0</span></span>
                        <span class="text-red-600 bg-red-50 px-2 py-0.5 rounded border border-red-200">üî¥ ‡∏á‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏á:
                            <span id="disp-ticket-backlog">0</span></span>
                        <span class="text-gray-400 text-[9px] font-normal ml-1">(Total: <span
                                id="disp-ticket-total">0</span>)</span>
                    </div>
                </div>
                <div class="overflow-y-auto flex-1 p-0 custom-scrollbar">
                    <table class="table table-xs w-full table-pin-rows table-fixed">
                        <thead class="bg-gray-50 text-gray-500">
                            <tr>
                                <th class="w-24 text-center">ID</th>
                                <th class="w-24 text-center">Status</th>
                                <th>Short Description & Subject</th>
                            </tr>
                        </thead>
                        <tbody id="disp-ticket-tbody"></tbody>
                    </table>
                    <div id="loader-ticket" class="hidden py-10 text-center"><span
                            class="loading loading-spinner text-gray-400"></span></div>
                    <div id="empty-ticket" class="hidden py-10 text-center text-gray-300 text-xs">‡πÑ‡∏°‡πà‡∏°‡∏µ Ticket
                        ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</div>
                </div>
            </div>
        </div>

        <div class="lg:col-span-4 flex flex-col h-full overflow-hidden relative">

            <div class="flex-1 overflow-y-auto custom-scrollbar flex flex-col gap-3 pb-2 pr-1">

                <div class="card bg-white shadow-sm border border-base-300 p-4 rounded-2xl gap-3 shrink-0">
                    <div class="form-control">
                        <span class="text-[10px] font-bold uppercase text-gray-400 mb-1">‡∏ú‡∏π‡πâ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</span>
                        <div class="relative">
                            <select id="reporterSelect" onchange="ReportManager.handleReporterChange(this.value)"
                                class="select select-bordered select-sm w-full text-xs bg-slate-50 focus:bg-white transition-colors">
                                <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å --</option>
                                <option value="OTHER">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                            </select>
                            <div id="wrapper-reporter-other" class="hidden absolute inset-0 bg-white flex gap-1">
                                <input type="text" id="reporterOther"
                                    class="input input-bordered input-sm w-full text-xs" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠...">
                                <button onclick="ReportManager.resetReporter()"
                                    class="btn btn-sm btn-square btn-ghost"><i class="fas fa-times"></i></button>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-2">
                        <div class="form-control">
                            <span class="text-[10px] font-bold uppercase text-gray-400 mb-1">‡∏Å‡∏∞ (Shift)</span>
                            <select id="shiftSelect"
                                class="select select-bordered select-sm w-full text-xs bg-slate-50">
                                <option value="Night Shift">Night Shift</option>
                                <option value="Day Shift">Day Shift</option>
                            </select>
                        </div>
                        <div class="form-control">
                            <span class="text-[10px] font-bold uppercase text-gray-400 mb-1">‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÅ‡∏ä‡∏ó</span>
                            <select id="chatTargetSelect"
                                class="select select-bordered select-sm w-full text-xs bg-slate-50">
                                <option value="">Save Only</option>
                                <option value="group_all">Group All</option>
                                <option value="group_dev">Group Dev</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="card bg-white shadow-sm border border-base-300 p-4 rounded-2xl gap-2 shrink-0">
                    <div class="flex justify-between items-center">
                        <span class="text-xs font-bold flex items-center gap-1 text-slate-700">
                            <i class="fas fa-play-circle text-yellow-500"></i> ‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô Start Channel
                        </span>
                        <select id="statusStart" class="select select-xs select-bordered w-auto text-xs"
                            onchange="ReportManager.toggleStartArea(this.value)">
                            <option value="‡πÑ‡∏°‡πà‡∏°‡∏µ">‡πÑ‡∏°‡πà‡∏°‡∏µ</option>
                            <option value="‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢">‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢</option>
                            <option value="‡∏ï‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤">‡∏ï‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤</option>
                        </select>
                    </div>

                    <div id="start-upload-area" class="hidden space-y-2">
                        <div id="auto-start-images"
                            class="hidden bg-amber-50/50 p-2 rounded-lg border border-amber-200/60">
                            <div class="text-[9px] text-amber-600 mb-1.5 flex items-center justify-between">
                                <span class="flex items-center gap-1">
                                    <i class="fas fa-hand-pointer text-amber-500"></i>
                                    <b>‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</b>‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏™‡πà‡πÉ‡∏ô PDF
                                </span>
                                <span id="auto-start-count" class="badge badge-xs badge-warning font-mono">0
                                    ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</span>
                            </div>
                            <div id="auto-start-list" class="flex flex-wrap gap-2"></div>
                        </div>

                        <div id="dropzone-start" onclick="document.getElementById('fileStart').click()"
                            onpaste="ReportManager.handlePasteEvent(event, 'start')" tabindex="0"
                            class="border-2 border-dashed border-amber-300 hover:border-amber-400 bg-amber-50/30 hover:bg-amber-50 rounded-lg p-2.5 cursor-pointer transition-all group text-center focus:ring-2 focus:ring-amber-300 focus:outline-none">
                            <div
                                class="flex items-center justify-center gap-2 text-amber-400 group-hover:text-amber-500 transition-colors">
                                <i class="fas fa-cloud-upload-alt text-sm"></i>
                                <span class="text-[10px] font-semibold">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î ‡∏´‡∏£‡∏∑‡∏≠ Ctrl+V ‡∏ß‡∏≤‡∏á‡∏£‡∏π‡∏õ</span>
                            </div>
                        </div>

                        <input type="file" id="fileStart" class="hidden" multiple accept="image/*"
                            onchange="ReportManager.handleFileUpload(this, 'start')">
                    </div>
                </div>

                <div class="card bg-white shadow-sm border border-base-300 p-4 rounded-2xl gap-3 shrink-0">

                    <div>
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-xs font-bold flex items-center gap-1 text-slate-700">
                                <span class="w-2 h-2 rounded-full bg-indigo-500"></span> ‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô Mono <span
                                    class="text-red-500">*</span>
                            </span>
                        </div>

                        <div id="auto-mono-images"
                            class="hidden bg-indigo-50/50 p-2 rounded-lg border border-indigo-200/60 mb-2">
                            <div class="text-[9px] text-indigo-600 mb-1.5 flex items-center justify-between">
                                <span class="flex items-center gap-1">
                                    <i class="fas fa-hand-pointer text-indigo-500"></i>
                                    <b>‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</b>‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏™‡πà‡πÉ‡∏ô PDF
                                </span>
                                <span id="auto-mono-count" class="badge badge-xs badge-primary font-mono">0 ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</span>
                            </div>
                            <div id="auto-mono-list" class="flex flex-wrap gap-2"></div>
                        </div>

                        <input type="file" id="fileMono" multiple accept="image/*" class="hidden"
                            onchange="ReportManager.handleFileUpload(this, 'mono')">

                        <div id="dropzone-mono" onclick="document.getElementById('fileMono').click()"
                            onpaste="ReportManager.handlePasteEvent(event, 'mono')" tabindex="0"
                            class="border-2 border-dashed border-indigo-300 hover:border-indigo-400 bg-indigo-50/30 hover:bg-indigo-50 rounded-lg p-2.5 cursor-pointer transition-all group text-center focus:ring-2 focus:ring-indigo-300 focus:outline-none">
                            <div
                                class="flex items-center justify-center gap-2 text-indigo-400 group-hover:text-indigo-500 transition-colors">
                                <i class="fas fa-cloud-upload-alt text-sm"></i>
                                <span class="text-[10px] font-semibold">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î ‡∏´‡∏£‡∏∑‡∏≠ Ctrl+V ‡∏ß‡∏≤‡∏á‡∏£‡∏π‡∏õ</span>
                            </div>
                        </div>
                    </div>

                    <div class="divider my-0 h-px bg-slate-100"></div>

                    <div>
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-xs font-bold flex items-center gap-1 text-slate-700">
                                <span class="w-2 h-2 rounded-full bg-green-500"></span> ‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô AIS
                            </span>
                            <div class="flex items-center gap-1">
                                <select id="statusAis" onchange="ReportManager.toggleAisActions(this.value)"
                                    class="select select-xs select-bordered w-auto text-xs">
                                    <option value="‡πÑ‡∏°‡πà‡∏°‡∏µ">‡πÑ‡∏°‡πà‡∏°‡∏µ</option>
                                    <option value="‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢">‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢</option>
                                    <option value="‡∏ï‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤">‡∏ï‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤</option>
                                </select>
                            </div>
                        </div>
                        <div id="proof-ais-box" class="hidden">
                            <input type="file" id="fileAis" multiple accept="image/*" class="hidden"
                                onchange="ReportManager.handleFileUpload(this, 'ais')">

                            <div id="dropzone-ais" onclick="document.getElementById('fileAis').click()"
                                onpaste="ReportManager.handlePasteEvent(event, 'ais')" tabindex="0"
                                class="border-2 border-dashed border-green-300 hover:border-green-400 bg-green-50/30 hover:bg-green-50 rounded-lg p-2 cursor-pointer transition-all group text-center mt-1 focus:ring-2 focus:ring-green-300 focus:outline-none">
                                <div
                                    class="flex items-center justify-center gap-2 text-green-400 group-hover:text-green-500 transition-colors">
                                    <i class="fas fa-cloud-upload-alt text-sm"></i>
                                    <span class="text-[10px] font-semibold">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î ‡∏´‡∏£‡∏∑‡∏≠ Ctrl+V ‡∏ß‡∏≤‡∏á‡∏£‡∏π‡∏õ</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div
                    class="card bg-white shadow-sm border border-base-300 flex-1 min-h-[120px] rounded-2xl overflow-hidden p-3 flex flex-col shrink-0">
                    <span class="text-[10px] font-bold uppercase text-gray-400 mb-1">Shift Transfer</span>
                    <textarea id="transferReport"
                        class="textarea textarea-ghost w-full h-full text-xs resize-none p-0 focus:outline-none"
                        placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°..."></textarea>
                </div>

            </div>

            <div class="shrink-0 pt-3 pb-1 mt-auto bg-base-200 z-10">
                <textarea id="matchSummary" class="hidden"></textarea>
                <textarea id="ticketSummary" class="hidden"></textarea>
                <input type="hidden" id="matchTotalValue" value="0">
                <input type="hidden" id="matchEndedValue" value="0">

                <div class="grid grid-cols-2 gap-3">
                    <button onclick="ReportManager.submitForm('preview')"
                        class="btn btn-sm btn-outline border-slate-300 text-slate-600 hover:bg-slate-100 hover:border-slate-400"><i
                            class="fas fa-eye"></i> ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</button>
                    <button id="btn-submit-report" onclick="ReportManager.submitForm('send')"
                        class="btn btn-sm btn-neutral text-white shadow-md hover:scale-[1.02] transition-transform">
                        <span id="spin-btn-send" class="loading loading-spinner loading-xs hidden"></span> <i
                            class="fas fa-paper-plane"></i> ‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
                    </button>
                </div>
            </div>
        </div>
    </div>

    <dialog id="preview_modal" class="modal modal-bottom sm:modal-middle">
        <div class="modal-box p-0 rounded-2xl max-w-lg">
            <div class="bg-neutral text-white px-5 py-4 font-bold flex justify-between items-center">
                <span>Preview Report</span>
                <button onclick="document.getElementById('preview_modal').close()"
                    class="btn btn-xs btn-circle btn-ghost text-white opacity-70 hover:opacity-100"><i
                        class="fas fa-times"></i></button>
            </div>
            <div class="p-6 bg-gray-50 max-h-[60vh] overflow-y-auto">
                <div id="chatPreviewText"
                    class="bg-white p-4 rounded-xl border border-slate-200 text-xs font-mono whitespace-pre-wrap leading-relaxed text-slate-700 shadow-sm">
                </div>
            </div>
            <div class="p-4 flex justify-end gap-2 bg-white border-t border-slate-100">
                <form method="dialog"><button class="btn btn-sm btn-ghost text-slate-500">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button></form>
                <button class="btn btn-sm btn-success text-white shadow-sm gap-2" onclick="ReportManager.confirmSend()">
                    <i class="fas fa-check"></i> ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡πà‡∏á
                </button>
            </div>
        </div>
        <form method="dialog" class="modal-backdrop"><button>close</button></form>
    </dialog>
</div>