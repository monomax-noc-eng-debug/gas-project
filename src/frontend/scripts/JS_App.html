<script>
  document.addEventListener('DOMContentLoaded', async () => {
    console.log("üöÄ App Starting...");

    // 1. Sidebar Links
    document.querySelectorAll('aside a[data-target]').forEach(el => {
      el.addEventListener('click', (e) => {
        e.preventDefault();
        const target = el.dataset.target;
        Router.navigateTo(target);
        // Close drawer on mobile
        const drawer = document.getElementById('my-drawer');
        if (drawer) drawer.checked = false;
      });
    });

    // 2. Initialize Data
  try {
      await Store.init();

      // ‚úÖ [‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡∏°‡πà] 3. Navigate to Last Page or Default
      const lastPage = localStorage.getItem('gas_last_page');
      
      // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏ô‡∏±‡πâ‡∏ô‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏£‡∏¥‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (‡∏Å‡∏±‡∏ô Error ‡∏Å‡∏£‡∏ì‡∏µ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤)
      if (lastPage && document.getElementById(lastPage)) {
        Router.navigateTo(lastPage);
      } else {
        Router.navigateTo('page-dashboard');
      }

    } catch (e) {
      console.error("App Init Failed", e);
    }
  });
</script>